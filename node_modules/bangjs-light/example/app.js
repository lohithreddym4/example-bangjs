const MyFramework = require('../src/framework.js'); // Your framework
const todosRouter = require('./routes/todos.js'); // Routes for todos
const usersRouter = require('./routes/users.js'); // Routes for users
const dummy=require('./testmiddleware')

const app = new MyFramework();

// Use routers
app.use(dummy)
app.useRoute('/todos', todosRouter)
app.useRoute('/users', usersRouter)
app.post('/upload',async(req,res)=>{
    console.log(req.files);
    console.log(req.fields);
    return res.end(JSON.stringify({ message:"done"}));
})
app.post('/check',async(req,res)=>{
    return res.end(JSON.stringify({ message:"done"}));
},{
    age:{
        required:true
    }
})
app.get('/test', (req, res, sendResponse) => {
    const data = { message: 'Hello from BangJS' };
    const cookies = [{ name: 'sessionId', value: 'abc123' }];
    sendResponse(404, data, cookies);
});

app.listen(3000, () => {
    console.log('Server running on port 3000');
});
