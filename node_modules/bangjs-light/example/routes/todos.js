const { Router } = require('../../src/router');
const router = new Router();

let todos = [
    { id: 1, task: 'Learn Node.js' },
    { id: 2, task: 'Build a framework' }
];

router.get('/', (req, res) => {
    res.end(JSON.stringify(todos));
});

router.post('/', (req, res) => {
    const { task } = req.body;
    if (!task) {
        return res.end(JSON.stringify({ error: 'Task is required' }));
    }

    const newTodo = { id: todos.length + 1, task };
    todos.push(newTodo);

    res.end(JSON.stringify({ message: 'Todo added', todo: newTodo }));
});

router.delete('/:id', (req, res) => {
    const { id } = req.params;
    todos = todos.filter(t => t.id !== parseInt(id));
    res.end(JSON.stringify({ message: 'Todo deleted' ,id}));
});

module.exports = router;
